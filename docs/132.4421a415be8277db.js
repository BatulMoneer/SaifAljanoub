"use strict";(self.webpackChunkSaifAljanoub=self.webpackChunkSaifAljanoub||[]).push([[132],{2132:(V,f,p)=>{p.r(f),p.d(f,{AuthModule:()=>B});var a=p(9808),d=p(6609),s=p(2382),h=p(7987),t=p(4893),C=p(5830),v=p(72),y=p(2290);function x(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"input",3,4),t.NdJ("paste",function(i){return t.CHM(e),t.oxw(2).handlePaste(i)})("keyup",function(i){const l=t.CHM(e).index;return t.oxw(2).onKeyUp(i,l)})("input",function(i){return t.CHM(e),t.oxw(2).onInput(i)})("keydown",function(i){const l=t.CHM(e).index;return t.oxw(2).onKeyDown(i,l)}),t.qZA()}if(2&n){const e=u.$implicit,o=u.index,i=t.oxw(2);t.Gre("otp-input ",i.config.inputClass,""),t.Q6J("pattern",i.config.allowNumbersOnly?"\\d*":"")("type",i.inputType)("placeholder",(null==i.config?null:i.config.placeholder)||"")("ngStyle",i.config.inputStyles)("formControl",i.otpForm.controls[e])("id",i.getBoxId(o))}}function A(n,u){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,x,2,9,"input",2),t.ALo(2,"keys"),t.qZA()),2&n){const e=t.oxw();t.Gre("ng-otp-input-wrapper wrapper ",e.config.containerClass,""),t.MGl("id","c_",e.componentKey,""),t.Q6J("ngStyle",e.config.containerStyles),t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,6,null==e.otpForm?null:e.otpForm.controls))}}class c{static ifTab(u){return this.ifKey(u,"Tab")}static ifDelete(u){return this.ifKey(u,"Delete;Del")}static ifBackspace(u){return this.ifKey(u,"Backspace")}static ifRightArrow(u){return this.ifKey(u,"ArrowRight;Right")}static ifLeftArrow(u){return this.ifKey(u,"ArrowLeft;Left")}static ifSpacebar(u){return this.ifKey(u,"Spacebar; ")}static ifKey(u,e){return e.split(";").some(i=>i===u.key)}}let m=(()=>{class n{transform(e){return Object.keys(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"keys",type:n,pure:!0}),n})(),b=(()=>{class n{constructor(e,o){this.keysPipe=e,this.document=o,this.config={length:4},this.onInputChange=new t.vpe,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}get inputType(){var e,o;return(null===(e=this.config)||void 0===e?void 0:e.isPasswordInput)?"password":(null===(o=this.config)||void 0===o?void 0:o.allowNumbersOnly)?"tel":"text"}ngOnInit(){this.otpForm=new s.cw({});for(let e=0;e<this.config.length;e++)this.otpForm.addControl(this.getControlName(e),new s.NI);this.otpForm.valueChanges.subscribe(e=>{this.keysPipe.transform(this.otpForm.controls).forEach(o=>{var i=this.otpForm.controls[o].value;i&&i.length>1&&(i.length>=this.config.length?this.setValue(i):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){const e=this.document.getElementById(`c_${this.componentKey}`);if(e){const o=e.getElementsByClassName("otp-input")[0];o&&o.focus&&o.focus()}}}getControlName(e){return`ctrl_${e}`}onKeyDown(e,o){const i=this.getBoxId(o-1),r=this.getBoxId(o);return c.ifSpacebar(e)?(e.preventDefault(),!1):c.ifBackspace(e)?(e.target.value?this.clearInput(r,o):(this.clearInput(i,o-1),this.setSelected(i)),void this.rebuildValue()):void 0}onInput(e){if(this.config.allowNumbersOnly&&!this.validateNumber(this.currentVal?`${this.currentVal}${e.target.value}`:e.target.value))return e.target.value="",e.stopPropagation(),void e.preventDefault()}onKeyUp(e,o){c.ifTab(e)&&(o-=1);const i=this.getBoxId(o+1),r=this.getBoxId(o-1),l=this.getBoxId(o);return c.ifRightArrow(e)?(e.preventDefault(),void this.setSelected(i)):c.ifLeftArrow(e)?(e.preventDefault(),void this.setSelected(r)):c.ifDelete(e)?(e.target.value?this.clearInput(l,o):(this.clearInput(r,o-1),this.setSelected(r)),void this.rebuildValue()):void(!e.target.value||(this.ifValidKeyCode(e)&&this.setSelected(i),this.rebuildValue()))}validateNumber(e){return e&&/^[0-9]+$/.test(e)}getBoxId(e){return`otp_${e}_${this.componentKey}`}clearInput(e,o){var i;let r=this.getControlName(o);null===(i=this.otpForm.controls[r])||void 0===i||i.setValue(null);const l=this.document.getElementById(e);l&&l instanceof HTMLInputElement&&(l.value=null)}setSelected(e){this.focusTo(e);const o=this.document.getElementById(e);o&&o.setSelectionRange&&setTimeout(()=>{o.setSelectionRange(0,1)},0)}ifValidKeyCode(e){const o=e.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(o)}focusTo(e){const o=this.document.getElementById(e);o&&o.focus()}setValue(e){if(!this.config.allowNumbersOnly||!isNaN(e)){if(this.otpForm.reset(),!e)return void this.rebuildValue();if(e=e.toString().replace(/\s/g,""),Array.from(e).forEach((i,r)=>{this.otpForm.get(this.getControlName(r))&&this.otpForm.get(this.getControlName(r)).setValue(i)}),!this.config.disableAutoFocus){const i=this.document.getElementById(`c_${this.componentKey}`);var o=e.length<this.config.length?e.length:this.config.length-1;let r=i.getElementsByClassName("otp-input")[o];r&&r.focus&&r.focus()}this.rebuildValue()}}rebuildValue(){var e;let o="";this.keysPipe.transform(this.otpForm.controls).forEach(i=>{if(this.otpForm.controls[i].value){let r=this.otpForm.controls[i].value,l=r.length>1,g=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());r=r[0];let _=g?"upper"==this.config.letterCase.toLocaleLowerCase()?r.toUpperCase():r.toLowerCase():r;g&&_==r?g=!1:r=_,o+=r,(l||g)&&this.otpForm.controls[i].setValue(r)}}),(null===(e=this.formCtrl)||void 0===e?void 0:e.setValue)&&this.formCtrl.setValue(o),this.onInputChange.emit(o),this.currentVal=o}handlePaste(e){let o=e.clipboardData||window.clipboardData;if(o)var i=o.getData("Text");e.stopPropagation(),e.preventDefault(),i&&(!this.config.allowNumbersOnly||this.validateNumber(i))&&this.setValue(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m),t.Y36(a.K0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","formControl","id","paste","keyup","input","keydown"],["inp",""]],template:function(e,o){1&e&&t.YNc(0,A,3,8,"div",0),2&e&&t.Q6J("ngIf",null==o.otpForm?null:o.otpForm.controls)},directives:[a.O5,a.PC,a.sg,s.Fj,s.c5,s.JJ,s.oH],pipes:[m],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[m],imports:[[a.ez,s.u5,s.UX]]}),n})();const I=["ngOtpInput"];function O(n,u){1&n&&(t.TgZ(0,"p",13),t._uU(1,"\u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628!"),t.qZA())}function T(n,u){1&n&&(t.TgZ(0,"p",13),t._uU(1,"\u0627\u0644\u0628\u0631\u064a\u062f \u062e\u0627\u0637\u0626!"),t.qZA())}function M(n,u){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,O,2,0,"p",12),t.YNc(2,T,2,0,"p",12),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.submitted&&e.formData.controls.admin_email.errors.required),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.formData.controls.admin_email.errors.email)}}function N(n,u){1&n&&(t.TgZ(0,"p",13),t._uU(1,"\u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628!"),t.qZA())}function F(n,u){1&n&&(t.TgZ(0,"p",13),t._uU(1,"\u064a\u062c\u0628 \u0623\u0646 \u062a\u062a\u0643\u0648\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0645\u0646 8 \u062d\u0631\u0648\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644!"),t.qZA())}function Z(n,u){1&n&&(t.TgZ(0,"p",13),t._uU(1,"\u064a\u062c\u0628 \u0623\u0644\u0627 \u062a\u062a\u062c\u0627\u0648\u0632 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 12 \u062d\u0631\u0641\u064b\u0627! "),t.qZA())}function P(n,u){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,N,2,0,"p",12),t.YNc(2,F,2,0,"p",12),t.YNc(3,Z,2,0,"p",12),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.submitted&&e.formData.controls.admin_password.errors.required),t.xp6(1),t.Q6J("ngIf",e.formData.controls.admin_password.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.formData.controls.admin_password.errors.maxlength)}}function D(n,u){if(1&n&&(t.TgZ(0,"div")(1,"p",6),t._uU(2,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"),t.TgZ(3,"span",7),t._uU(4,"*"),t.qZA()(),t._UZ(5,"input",8),t.YNc(6,M,3,2,"div",5),t.TgZ(7,"p",6),t._uU(8,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631:"),t.TgZ(9,"span",7),t._uU(10,"*"),t.qZA()(),t._UZ(11,"input",9),t.YNc(12,P,4,3,"div",5),t.TgZ(13,"div",10)(14,"button",11),t._uU(15,"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.submitted&&e.formData.controls.admin_email.errors),t.xp6(6),t.Q6J("ngIf",e.submitted&&e.formData.controls.admin_password.errors)}}const S=function(){return{"font-size":"16px"}},L=function(n){return{length:4,allowNumbersOnly:!0,inputStyles:n}};function k(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"p",6),t._uU(2,"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0645\u0631\u0633\u0644 \u0627\u0644\u0649 \u0627\u0644\u0628\u0631\u064a\u062f"),t.qZA(),t._UZ(3,"ng-otp-input",14,15),t.TgZ(5,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().otpCheck()}),t._uU(6,"\u062a\u0623\u0643\u064a\u062f"),t.qZA()()}2&n&&(t.xp6(3),t.Q6J("config",t.VKq(2,L,t.DdM(1,S))))}const U=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(e,o,i,r,l){this.router=e,this.formBuilder=o,this.impApiService=i,this.spinner=r,this.toastr=l,this.submit="\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",this.link="home",this.formData=null,this.submitted=!1,this.showOtpInput=!1}ngOnInit(){this.formData=this.formBuilder.group({admin_email:["",[s.kI.required,s.kI.email]],admin_password:["",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(12)]]})}login(){if(this.submitted=!0,this.formData.invalid)return null;this.spinner.show(),this.impApiService.post(h.S.login,this.formData.value).subscribe(e=>{'"\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644... \u0644\u0644\u062a\u0623\u0643\u064a\u062f \u062a\u0645 \u0627\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0639\u0644\u0649 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a  "'==JSON.stringify(e.message)?(this.showOtpInput=!0,this.spinner.hide()):(this.toastr.error("\u064a\u0648\u062c\u062f \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0623\u0648 \u0641\u064a \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),this.spinner.hide())})}otpCheck(){var e;const o={admin_email:null===(e=this.formData.get("admin_email"))||void 0===e?void 0:e.value,otp_entered:this.ngOtpInput.currentVal};console.log("Spinner show called"),this.spinner.show(),this.impApiService.post(h.S.verify,o).subscribe({next:i=>{this.spinner.hide(),localStorage.setItem("token",i.access_token),localStorage.setItem("user_id",i.admin_id),this.router.navigate(["/apps/homepage/home"])},error:i=>{var r;"\u0627\u0644\u0631\u0645\u0632 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d ... \u0627\u0648 \u0627\u0646\u062a\u0647\u062a \u0627\u0644\u0645\u062f\u0629 \u0627\u0644\u0635\u0627\u0644\u062d\u0629 \u0644\u0647 "===(null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message)?(console.log("ssss"),this.toastr.error("\u0627\u0644\u0631\u0645\u0632 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d ... \u0627\u0648 \u0627\u0646\u062a\u0647\u062a \u0627\u0644\u0645\u062f\u0629 \u0627\u0644\u0635\u0627\u0644\u062d\u0629 \u0644\u0647 ")):(console.error("Unexpected error:",i),this.toastr.error("\u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639 \u064a\u0631\u062c\u0649 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629")),this.spinner.hide()}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.F0),t.Y36(s.qu),t.Y36(C.y),t.Y36(v.t2),t.Y36(y._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],viewQuery:function(e,o){if(1&e&&t.Gf(I,5),2&e){let i;t.iGM(i=t.CRH())&&(o.ngOtpInput=i.first)}},decls:10,vars:3,consts:[[1,"body"],["src","../../../assets/images/Logo.png","alt",""],[1,"middle"],[1,"form",3,"formGroup","ngSubmit"],[1,"title"],[4,"ngIf"],[1,"text"],[2,"color","#CA7676"],["type","email","formControlName","admin_email","placeholder","\u0627\u0643\u062a\u0628 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a","required",""],["type","password","formControlName","admin_password","placeholder","\u0627\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","required",""],[1,"btn"],["type","submit"],["class","invalid",4,"ngIf"],[1,"invalid"],[3,"config"],["ngOtpInput",""],[1,"otp-butt",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"p"),t._uU(3,"\u0633\u064a\u0641 \u0627\u0644\u062c\u0646\u0648\u0628"),t.qZA(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("ngSubmit",function(){return o.login()}),t.TgZ(6,"h1",4),t._uU(7,"\u0623\u0647\u0644\u0627 \u0628\u0639\u0648\u062f\u062a\u0643"),t.qZA(),t.YNc(8,D,16,2,"div",5),t.YNc(9,k,7,4,"div",5),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",o.formData),t.xp6(3),t.Q6J("ngIf",!o.showOtpInput),t.xp6(1),t.Q6J("ngIf",o.showOtpInput))},directives:[s._Y,s.JL,s.sg,a.O5,s.Fj,s.JJ,s.u,s.Q7,b],styles:[".body[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding-top:70px;text-align:center}.body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px;margin-bottom:20px}.body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--prime);font-weight:700;margin-bottom:10px}.middle[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:700px;width:100%;border-radius:10px}.middle[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:64px;margin:0 0 20px;color:var(--prime)}.middle[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:100%;text-align:right;font-size:16px;margin-bottom:5px;font-weight:400;color:var(--grey)}.middle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin:5px 0 20px;background-color:var(--lighter-grey);font-size:1rem}.middle[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]{color:#ca7676;font-size:16px;font-weight:400;margin-top:-10px;text-align:right}.btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;border:none;cursor:pointer;transition:background-color .3s}.btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--grey)}ng-otp-input[_ngcontent-%COMP%]{width:100%;margin:5px 0 20px;direction:ltr!important}.otp-butt[_ngcontent-%COMP%]{margin-top:20px}"]}),n})()},{path:"notFound",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-not-found"]],decls:12,vars:0,consts:[[1,"not-found"],["src","../../../assets/images/Logo.png","alt",""],[1,"error-code"],[1,"error-message"],[2,"color","#CA7676"],["routerLink","/home"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2),t._uU(3,"404"),t.qZA(),t.TgZ(4,"div",3)(5,"span",4),t._uU(6,"\u0639\u0630\u0631\u0627\u064b!"),t.qZA(),t._uU(7," \u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629"),t.qZA(),t.TgZ(8,"p"),t._uU(9,"\u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u062a\u064a \u062a\u062d\u0627\u0648\u0644 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0627\u0644\u064a\u0647\u0627 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629"),t.qZA(),t.TgZ(10,"button",5),t._uU(11,"\u0639\u0648\u062f\u0629"),t.qZA()())},directives:[d.rH],styles:[".not-found[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;color:#333}.error-code[_ngcontent-%COMP%]{font-size:10rem;font-weight:700;color:var(--prime);margin-bottom:0}.error-message[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--grey);margin-bottom:10px}p[_ngcontent-%COMP%]{font-size:16px;color:var(--grey);margin-bottom:30px}button[_ngcontent-%COMP%]{cursor:pointer;padding:0 20px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:var(--dark-grey)}"]}),n})()},{path:"**",redirectTo:"notFound"}];let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(U)],d.Bz]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,J,s.u5,s.UX,w]]}),n})()}}]);