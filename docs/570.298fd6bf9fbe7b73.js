"use strict";(self.webpackChunkSaifAljanoub=self.webpackChunkSaifAljanoub||[]).push([[570],{6570:(E,f,p)=>{p.r(f),p.d(f,{PartnersModule:()=>z});var d=p(9808),s=p(6609),g=p(7987),t=p(4893),l=p(5830),_=p(72),m=p(2290);function h(r,a){if(1&r){const n=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t._UZ(2,"img",10),t.qZA(),t.TgZ(3,"h4"),t._uU(4),t.qZA(),t.TgZ(5,"div",11)(6,"a",12),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw().delete_partner(i.partner_id)}),t._UZ(7,"i",13),t.TgZ(8,"span"),t._uU(9,"\u062d\u0630\u0641"),t.qZA()(),t.TgZ(10,"a",12),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw().update_partner(i.partner_id)}),t._UZ(11,"i",14),t.TgZ(12,"span"),t._uU(13,"\u062a\u0639\u062f\u064a\u0644"),t.qZA()()()()}if(2&r){const n=t.oxw().$implicit;t.xp6(2),t.Q6J("src",n.partner_image,t.LSH),t.xp6(2),t.Oqu(n.partner_name)}}function P(r,a){if(1&r&&(t.ynx(0),t.YNc(1,h,14,2,"div",7),t.BQk()),2&r){const n=a.index;t.xp6(1),t.Q6J("ngIf",n<5)}}function C(r,a){1&r&&(t.TgZ(0,"div",15)(1,"a",16),t._UZ(2,"i",17),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u0625\u0636\u0627\u0641\u0629"),t.qZA()())}function x(r,a){if(1&r){const n=t.EpF();t.TgZ(0,"span",18),t.NdJ("click",function(){const o=t.CHM(n).index;return t.oxw().goToPage(o)}),t.qZA()}if(2&r){const n=a.index,e=t.oxw();t.ekj("active",n===e.currentPage)}}let v=(()=>{class r{constructor(n,e,i,o){this.impApiService=n,this.spinner=e,this.toastr=i,this.router=o,this.partners=[],this.servicesPerPage=5,this.currentPage=0,this.paginatedServices=[],this.pages=[]}ngOnInit(){this.spinner.show(),this.impApiService.get(g.S.viewPartner).subscribe({next:n=>{Array.isArray(n[0])?(this.partners=n[0],this.updatePagination(),this.spinner.hide()):(console.error("Unexpected response structure:",n),this.toastr.error("\u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639"),this.spinner.hide())},error:n=>{console.error("API Error:",n),this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"),this.spinner.hide()}})}updatePagination(){this.pages=Array(Math.ceil(this.partners.length/this.servicesPerPage)).fill(0),this.paginatedServices=this.partners.slice(this.currentPage*this.servicesPerPage,(this.currentPage+1)*this.servicesPerPage)}goToPage(n){this.currentPage=n,this.updatePagination()}delete_partner(n){this.spinner.show(),console.log(n),this.impApiService.delete(`${g.S.deletePartner}${n}`).subscribe({next:()=>{this.spinner.hide(),this.ngOnInit()},error:e=>{console.error("API Error:",e),this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0630\u0641 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"),this.spinner.hide()}})}update_partner(n){localStorage.setItem("current_partner",n.toString()),this.router.navigate(["/apps/partners/edit"])}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(l.y),t.Y36(_.t2),t.Y36(m._W),t.Y36(s.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-home"]],decls:11,vars:4,consts:[[1,"all"],[1,"top"],[1,"middle"],[4,"ngFor","ngForOf"],["class"," add-card",4,"ngIf"],[1,"pagination"],["class","dot",3,"active","click",4,"ngFor","ngForOf"],["class","card",4,"ngIf"],[1,"card"],[1,"image"],["alt","",3,"src"],[1,"icons"],[1,"icon",3,"click"],[1,"fas","fa-trash-alt","trash"],[1,"fas","fa-edit","edit"],[1,"add-card"],["routerLink","/apps/partners/add",1,"icon"],[1,"fas","fa-plus","plus"],[1,"dot",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"\u0627\u0644\u0634\u0631\u0627\u0643\u0627\u062a"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",2),t.YNc(7,P,2,1,"ng-container",3),t.YNc(8,C,5,0,"div",4),t.qZA(),t.TgZ(9,"div",5),t.YNc(10,x,1,2,"span",6),t.qZA()()),2&n&&(t.xp6(5),t.hij("",e.partners.length," \u0634\u0631\u0627\u0643\u0627\u062a"),t.xp6(2),t.Q6J("ngForOf",e.paginatedServices),t.xp6(1),t.Q6J("ngIf",e.paginatedServices.length<6),t.xp6(2),t.Q6J("ngForOf",e.pages))},directives:[d.sg,d.O5,s.yS],styles:[".all[_ngcontent-%COMP%]{margin-right:375px;background-color:var(--dark-grey);color:#fff;height:100vh;overflow:hidden}.top[_ngcontent-%COMP%]{padding:30px 40px 10px 0;display:flex;flex-direction:row;align-items:center;gap:10px}.top[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;margin:0}.top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}.middle[_ngcontent-%COMP%]{padding:0 40px;display:flex;flex-wrap:wrap;gap:10px}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--grey);color:#fff;flex:0 0 calc(33.33% - 10px);box-sizing:border-box;display:flex}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{padding-top:10px;display:flex;justify-content:center}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:12px;object-fit:cover}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding-top:10px;font-size:16px;padding-right:10px}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:lighter;padding:0 10px 5px}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:0 10px 10px;gap:5px}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;color:var(--background-color);border-radius:5px;font-size:16PX;transition:background-color .3s,transform .3s}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:5px}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .trash[_ngcontent-%COMP%]{color:#ca7676}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#fff}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.middle[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:var(--light-grey);transform:scale(1.02)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:end;padding:10px}.pagination[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:10px;width:10px;margin:0 5px;background-color:var(--light-grey);border-radius:50%;display:inline-block;cursor:pointer;transition:background-color .3s}.pagination[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background-color:#fff}.add-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex:0 0 calc(33.33% - 10px);box-sizing:border-box}.add-card[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-size:100px;font-weight:lighter;color:#fff}.add-card[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:hover{color:var(--prime)}"]}),r})();var c=p(2382);function M(r,a){1&r&&(t.TgZ(0,"p",20),t._uU(1," \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628! "),t.qZA())}function O(r,a){1&r&&(t.TgZ(0,"p",20),t._uU(1," \u0627\u0644\u0627\u0633\u0645 \u0637\u0648\u064a\u0644 \u062c\u062f\u0627! "),t.qZA())}function A(r,a){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,M,2,0,"p",19),t.YNc(2,O,2,0,"p",19),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.submitted&&n.formData.controls.partner_name.errors.required),t.xp6(1),t.Q6J("ngIf",n.submitted&&n.formData.controls.partner_name.errors.maxlength)}}function Z(r,a){if(1&r&&t._UZ(0,"img",21),2&r){const n=t.oxw();t.Q6J("src",n.imagePreview,t.LSH)}}function b(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1,"\u0627\u0633\u062d\u0628 \u0627\u0644\u0635\u0648\u0631\u0629 \u0647\u0646\u0627 \u0623\u0648 \u0627\u062e\u062a\u0631 \u0645\u0644\u0641"),t.qZA())}function T(r,a){1&r&&(t.TgZ(0,"p",20),t._uU(1,"\u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628!"),t.qZA())}function y(r,a){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,T,2,0,"p",19),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.formData.controls.partner_image.errors.required)}}function w(r,a){1&r&&(t.TgZ(0,"p",20),t._uU(1," \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628! "),t.qZA())}function D(r,a){1&r&&(t.TgZ(0,"p",20),t._uU(1," \u0627\u0644\u0627\u0633\u0645 \u0637\u0648\u064a\u0644 \u062c\u062f\u0627! "),t.qZA())}function U(r,a){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,w,2,0,"p",19),t.YNc(2,D,2,0,"p",19),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.submitted&&n.formData.controls.partner_name.errors.required),t.xp6(1),t.Q6J("ngIf",n.submitted&&n.formData.controls.partner_name.errors.maxlength)}}function q(r,a){if(1&r&&t._UZ(0,"img",21),2&r){const n=t.oxw();t.Q6J("src",n.imagePreview,t.LSH)}}function k(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1,"\u0627\u0633\u062d\u0628 \u0627\u0644\u0635\u0648\u0631\u0629 \u0647\u0646\u0627 \u0623\u0648 \u0627\u062e\u062a\u0631 \u0645\u0644\u0641"),t.qZA())}function J(r,a){1&r&&(t.TgZ(0,"p",20),t._uU(1,"\u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628!"),t.qZA())}function S(r,a){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,J,2,0,"p",19),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.formData.controls.partner_image.errors.required)}}const Y=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:v},{path:"edit",component:(()=>{class r{constructor(n,e,i,o){this.formBuilder=n,this.toastr=e,this.spinner=i,this.impApiService=o,this.partner={partner_name:"",partner_image:""},this.submitted=!1,this.selectedImage=null,this.imagePreview=null}ngOnInit(){this.formData=this.formBuilder.group({partner_name:["",[c.kI.required,c.kI.maxLength(30)]],partner_image:["",c.kI.required]}),this.spinner.show(),this.impApiService.get(g.S.viewPartner).subscribe({next:n=>{const e=localStorage.getItem("current_partner");if(console.log(e),Array.isArray(n[0])&&e){const i=n[0].find(o=>o.partner_id.toString()===e);i?(this.partner={partner_name:i.partner_name,partner_image:i.partner_image},this.formData.patchValue(this.partner),this.imagePreview=this.partner.partner_image,this.spinner.hide()):(this.toastr.error("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0634\u0631\u064a\u0643"),this.spinner.hide())}else this.toastr.error("\u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639"),this.spinner.hide()},error:n=>{console.error("Error fetching partner data:",n),this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u0631\u064a\u0643"),this.spinner.hide()}})}add(){if(this.submitted=!0,this.formData.invalid)return void this.toastr.error("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0628\u0634\u0643\u0644 \u0635\u062d\u064a\u062d");this.spinner.show();const n=localStorage.getItem("current_partner");if(console.log(n),n){const e=new FormData;e.append("partner_name",this.formData.value.partner_name),this.selectedImage&&e.append("partner_image",this.selectedImage),this.impApiService.post(`${g.S.updatePartner}${n}`,e).subscribe({next:()=>{this.toastr.success("\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0628\u0646\u062c\u0627\u062d"),this.spinner.hide()},error:i=>{console.error("Error updating partner:",i),this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0634\u0631\u064a\u0643"),this.spinner.hide()}})}else this.toastr.error("\u0644\u0627 \u064a\u0648\u062c\u062f \u0634\u0631\u064a\u0643 \u062d\u0627\u0644\u064a \u0644\u0644\u062a\u062d\u062f\u064a\u062b"),this.spinner.hide()}handleImageInput(n){const e=n.target.files[0];e&&(this.selectedImage=e,this.formData.patchValue({image:e}),this.updateImagePreview(e))}updateImagePreview(n){const e=new FileReader;e.onload=i=>{var o;this.imagePreview=null===(o=i.target)||void 0===o?void 0:o.result},e.readAsDataURL(n)}onDragOver(n){n.preventDefault(),n.stopPropagation()}onDragLeave(n){n.preventDefault(),n.stopPropagation()}onDrop(n){var e;if(n.preventDefault(),n.stopPropagation(),null===(e=n.dataTransfer)||void 0===e?void 0:e.files){const i=n.dataTransfer.files[0];this.selectedImage=i,this.formData.patchValue({image:i}),this.updateImagePreview(i)}}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(c.qu),t.Y36(m._W),t.Y36(_.t2),t.Y36(l.y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-partner"]],decls:36,vars:5,consts:[[1,"all"],[1,"top"],[1,"right"],[1,"left"],["routerLink","/apps/partners/home",1,"icon"],[1,"fas","fa-chevron-left"],[1,"middle"],[3,"formGroup","ngSubmit"],[1,"text"],[2,"color","#CA7676"],["type","text","formControlName","partner_name","placeholder","\u0627\u0643\u062a\u0628 \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u064a\u0643","required",""],[4,"ngIf"],[1,"drop-zone",3,"dragover","dragleave","drop"],["alt","Partner Image","style","width: 130px; height: 130px; object-fit: cover; padding-bottom: 10px;",3,"src",4,"ngIf"],["type","button",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["fileInput",""],[1,"butt"],["type","submit"],["class","invalid",4,"ngIf"],[1,"invalid"],["alt","Partner Image",2,"width","130px","height","130px","object-fit","cover","padding-bottom","10px",3,"src"]],template:function(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4,"\u0627\u0644\u0634\u0631\u0627\u0643\u0627\u062a"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"\u062a\u0639\u062f\u064a\u0644 \u0634\u0631\u064a\u0643"),t.qZA()(),t.TgZ(7,"div",3)(8,"a",4)(9,"span"),t._uU(10,"\u0639\u0648\u062f\u0629"),t.qZA(),t._UZ(11,"i",5),t.qZA()()(),t.TgZ(12,"div",6)(13,"form",7),t.NdJ("ngSubmit",function(){return e.add()}),t.TgZ(14,"p",8),t._uU(15,"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629:"),t.TgZ(16,"span",9),t._uU(17,"*"),t.qZA()(),t._UZ(18,"input",10),t.YNc(19,A,3,2,"div",11),t.TgZ(20,"p",8),t._uU(21,"\u0634\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0643\u0629: "),t.TgZ(22,"span",9),t._uU(23,"*"),t.qZA(),t._uU(24," (\u064a\u0641\u0636\u0644 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0627\u0644\u0634\u0639\u0627\u0631 \u0623\u0641\u0642\u064a) "),t.qZA(),t.TgZ(25,"div",12),t.NdJ("dragover",function(u){return e.onDragOver(u)})("dragleave",function(u){return e.onDragLeave(u)})("drop",function(u){return e.onDrop(u)}),t.YNc(26,Z,1,1,"img",13),t.YNc(27,b,2,0,"p",11),t.TgZ(28,"button",14),t.NdJ("click",function(){return t.CHM(i),t.MAs(31).click()}),t._uU(29,"\u0627\u062e\u062a\u0631 \u0645\u0644\u0641"),t.qZA()(),t.TgZ(30,"input",15,16),t.NdJ("change",function(u){return e.handleImageInput(u)}),t.qZA(),t.YNc(32,y,2,1,"div",11),t.TgZ(33,"div",17)(34,"button",18),t._uU(35,"\u062d\u0641\u0638"),t.qZA()()()()()}2&n&&(t.xp6(13),t.Q6J("formGroup",e.formData),t.xp6(6),t.Q6J("ngIf",e.submitted&&e.formData.controls.partner_name.errors),t.xp6(7),t.Q6J("ngIf",e.imagePreview),t.xp6(1),t.Q6J("ngIf",!e.imagePreview),t.xp6(5),t.Q6J("ngIf",e.submitted&&e.formData.controls.partner_image.errors))},directives:[s.yS,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,c.Q7,d.O5],styles:['.all[_ngcontent-%COMP%]{margin-right:375px;background-color:var(--dark-grey);color:#fff;height:100vh;overflow:hidden}.top[_ngcontent-%COMP%]{padding:30px 40px 10px 0;display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:10px}.top[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px}.top[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;margin:0}.top[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin:0}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:start;justify-content:center;flex-direction:row-reverse}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{text-decoration:none;color:var(--background-color);font-size:16PX;transition:background-color .3s,transform .3s}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0 10px 0 40px}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .trash[_ngcontent-%COMP%]{color:#ca7676}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#fff}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.middle[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-right:40px}.middle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:400px}.middle[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px;width:400px;height:150px}.middle[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:10px 0 5px}.middle[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]{color:#ca7676;font-size:12px}.middle[_ngcontent-%COMP%]   .butt[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:10px}.middle[_ngcontent-%COMP%]   .butt[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.drop-zone[_ngcontent-%COMP%]{border-radius:10px;width:175px;color:var(--light-grey);position:relative;padding:20px;text-align:center;cursor:pointer;background-color:#fff;transition:background-color .3s}.drop-zone[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:5px;border-radius:10px;border:2px dashed var(--light-grey);pointer-events:none}.drop-zone.dragging[_ngcontent-%COMP%]{background-color:var(--light-grey)}img[_ngcontent-%COMP%]{width:100px;height:auto}']}),r})()},{path:"add",component:(()=>{class r{constructor(n,e,i,o){this.formBuilder=n,this.impApiService=e,this.spinner=i,this.toastr=o,this.submitted=!1,this.selectedImage=null,this.imagePreview=null}ngOnInit(){this.formData=this.formBuilder.group({partner_name:["",[c.kI.required,c.kI.maxLength(30)]],partner_image:["",[c.kI.required]]})}add(){var n,e;if(this.submitted=!0,this.formData.invalid)return void this.toastr.error("\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0623\u0643\u062f \u0645\u0646 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0628\u0634\u0643\u0644 \u0635\u062d\u064a\u062d.","\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062f\u062e\u0627\u0644");const i=new FormData;i.append("partner_name",null===(n=this.formData.get("partner_name"))||void 0===n?void 0:n.value),i.append("partner_image",null===(e=this.formData.get("partner_image"))||void 0===e?void 0:e.value),this.selectedImage&&i.append("partner_image",this.selectedImage),this.spinner.show(),this.impApiService.post(g.S.addPartner,i).subscribe({next:o=>{console.log(o),this.spinner.hide(),this.toastr.success("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d"),this.formData.reset(),this.submitted=!1,this.selectedImage=null,this.imagePreview=null},error:o=>{console.error(o),this.spinner.hide(),this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0623\u062e\u0628\u0627\u0631. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u0627\u064b.","\u062e\u0637\u0623")}})}onDragOver(n){n.preventDefault(),n.stopPropagation(),n.target.classList.add("dragging")}onDragLeave(n){n.target.classList.remove("dragging")}onDrop(n){var e;if(n.preventDefault(),n.stopPropagation(),n.target.classList.remove("dragging"),null===(e=n.dataTransfer)||void 0===e?void 0:e.files){const o=n.dataTransfer.files[0];this.selectedImage=o,this.formData.patchValue({image:o}),this.updateImagePreview(o)}}updateImagePreview(n){const e=new FileReader;e.onload=i=>{var o;this.imagePreview=null===(o=i.target)||void 0===o?void 0:o.result},e.readAsDataURL(n)}handleImageInput(n){const e=n.target.files[0];e&&(this.selectedImage=e,this.formData.patchValue({partner_image:e}),this.updateImagePreview(e),console.log("Image file selected:",e))}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(c.qu),t.Y36(l.y),t.Y36(_.t2),t.Y36(m._W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-partner"]],decls:36,vars:5,consts:[[1,"all"],[1,"top"],[1,"right"],[1,"left"],["routerLink","/apps/partners/home",1,"icon"],[1,"fas","fa-chevron-left"],[1,"middle"],[3,"formGroup","ngSubmit"],[1,"text"],[2,"color","#CA7676"],["type","text","formControlName","partner_name","placeholder","\u0627\u0643\u062a\u0628 \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u064a\u0643","required",""],[4,"ngIf"],[1,"drop-zone",3,"dragover","dragleave","drop"],["alt","Service Image","style","width: 130px; height: 100px; object-fit: cover; padding-bottom: 10px;",3,"src",4,"ngIf"],["type","button",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],["fileInput",""],[1,"butt"],["type","submit"],["class","invalid",4,"ngIf"],[1,"invalid"],["alt","Service Image",2,"width","130px","height","100px","object-fit","cover","padding-bottom","10px",3,"src"]],template:function(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4,"\u0627\u0644\u0634\u0631\u0627\u0643\u0627\u062a"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"\u0625\u0636\u0627\u0641\u0629 \u0634\u0631\u064a\u0643"),t.qZA()(),t.TgZ(7,"div",3)(8,"a",4)(9,"span"),t._uU(10,"\u0639\u0648\u062f\u0629"),t.qZA(),t._UZ(11,"i",5),t.qZA()()(),t.TgZ(12,"div",6)(13,"form",7),t.NdJ("ngSubmit",function(){return e.add()}),t.TgZ(14,"p",8),t._uU(15,"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629:"),t.TgZ(16,"span",9),t._uU(17,"*"),t.qZA()(),t._UZ(18,"input",10),t.YNc(19,U,3,2,"div",11),t.TgZ(20,"p",8),t._uU(21,"\u0634\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0643\u0629: "),t.TgZ(22,"span",9),t._uU(23,"*"),t.qZA(),t._uU(24," (\u064a\u0641\u0636\u0644 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0627\u0644\u0634\u0639\u0627\u0631 \u0623\u0641\u0642\u064a) "),t.qZA(),t.TgZ(25,"div",12),t.NdJ("dragover",function(u){return e.onDragOver(u)})("dragleave",function(u){return e.onDragLeave(u)})("drop",function(u){return e.onDrop(u)}),t.YNc(26,q,1,1,"img",13),t.YNc(27,k,2,0,"p",11),t.TgZ(28,"button",14),t.NdJ("click",function(){return t.CHM(i),t.MAs(31).click()}),t._uU(29,"\u0627\u062e\u062a\u0631 \u0645\u0644\u0641"),t.qZA()(),t.TgZ(30,"input",15,16),t.NdJ("change",function(u){return e.handleImageInput(u)}),t.qZA(),t.YNc(32,S,2,1,"div",11),t.TgZ(33,"div",17)(34,"button",18),t._uU(35,"\u0625\u0636\u0627\u0641\u0629"),t.qZA()()()()()}2&n&&(t.xp6(13),t.Q6J("formGroup",e.formData),t.xp6(6),t.Q6J("ngIf",e.submitted&&e.formData.controls.partner_name.errors),t.xp6(7),t.Q6J("ngIf",e.imagePreview),t.xp6(1),t.Q6J("ngIf",!e.selectedImage&&!e.imagePreview),t.xp6(5),t.Q6J("ngIf",e.submitted&&e.formData.controls.partner_image.errors))},directives:[s.yS,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,c.Q7,d.O5],styles:['.all[_ngcontent-%COMP%]{margin-right:375px;background-color:var(--dark-grey);color:#fff;height:100vh;overflow:hidden}.top[_ngcontent-%COMP%]{padding:30px 40px 10px 0;display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:10px}.top[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px}.top[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;margin:0}.top[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin:0}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:start;justify-content:center;flex-direction:row-reverse}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{text-decoration:none;color:var(--background-color);font-size:16PX;transition:background-color .3s,transform .3s}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0 10px 0 40px}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .trash[_ngcontent-%COMP%]{color:#ca7676}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#fff}.top[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.middle[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-right:40px}.middle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:400px}.middle[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px;width:400px;height:150px}.middle[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:10px 0 5px}.middle[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]{color:#ca7676;font-size:12px}.middle[_ngcontent-%COMP%]   .butt[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:100px}.middle[_ngcontent-%COMP%]   .butt[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.drop-zone[_ngcontent-%COMP%]{border-radius:10px;width:175px;color:var(--light-grey);position:relative;padding:20px;text-align:center;cursor:pointer;background-color:#fff;transition:background-color .3s}.drop-zone[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:5px;border-radius:10px;border:2px dashed var(--light-grey);pointer-events:none}.drop-zone.dragging[_ngcontent-%COMP%]{background-color:var(--light-grey)}']}),r})()}];let N=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[s.Bz.forChild(Y)],s.Bz]}),r})(),z=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[d.ez,N,c.u5,c.UX]]}),r})()}}]);